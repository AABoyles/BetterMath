<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/qunit/1.14.0/qunit.css" type="text/css" media="screen" />
</head>
<body>
  <h1 id="qunit-header">QUnit example</h1>
  <h2 id="qunit-banner"></h2>
  <div id="qunit-testrunner-toolbar"></div>
  <h2 id="qunit-userAgent"></h2>
  <ol id="qunit-tests"></ol>
  <div id="qunit-fixture">test markup, will be hidden</div>
  <script src="https://cdn.jsdelivr.net/qunit/1.14.0/qunit.min.js" type="text/javascript"></script>
  <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
  <script src="https://cdn.jsdelivr.net/lodash/4.17.4/lodash.min.js" type="text/javascript"></script>
  <script src="../bettermath.js" type="text/javascript" /></script>
  <script>
    _.extend(Math, math);
    $(document).ready(function(){
      module("Sum");

      test("Arrays", function() {
        expect(3);
        equal( Math.sum([1,2,3]), 6, "Easy" );
        equal( Math.PI + 0.3, Math.sum([0.2,0.1,Math.PI]), "Math.PI" );
        equal( 14.2, Math.sum([0,14,0.2]), "Zero" );
      });

      test("Objects", function() {
        expect(3);
        equal( Math.sum([{value:1},{value:2},{value:3}]), 6, "Array of objects" );
        equal( Math.sum([{a:1},{a:2, b:5},{a:3}], 'a'), 6, "Specify plucked key" );
        equal( Math.sum({one: {a:1},two:{a:2},three: {a:3}}, 'a'), 6, "Over values of an object with specified key" );
      });

      module("Mean");

      test("Arrays", function() {
        expect(2);
        equal( Math.mean([0,0.5,1]), 0.5, "Easy" );
        equal( Math.mean([0,1,2]), 1, "Another easy one" );
      });

      test("Objects", function() {
        expect(2);
        equal( Math.mean([{a:-Math.PI},{a:Math.PI}], 'a'), 0, "Array of objects, specified key" );
        equal( Math.mean({one: {a:-Math.PI}, two: {a:1}}, 'a'), (1-Math.PI)/2, "OVer values of an object with specified key" );
      });

      module("Scale");

      test("Arrays", function() {
        expect(3);
        deepEqual( Math.scale([1, 2, 5], 1), [0.2, 0.4, 1], "Scale to 1" );
        deepEqual( Math.scale([1, 2, 5], 5), [1, 2, 5], "Scale to 5" );
        deepEqual( Math.scale([1, 2, 5]), [0.2, 0.4, 1], "Implied 1" );
      });

      module("Numeric Sort");

      test("Arrays", function() {
        expect(2);
        deepEqual( Math.sort([0,4,7,-1]), [-1,0,4,7], "Digits, negative, zero" );
        deepEqual( Math.sort([0,4,7,-1,12,21,122]), [-1,0,4,7,12,21,122], "Double digits" );
      });

      module("Slope");

      test("Two points", function() {
        expect(4);
        equal( Math.slope([0,0], [5,5]), 1, "Slope of 1" );
        equal( Math.slope([0,0], [1,10]), 10, "Slope of 10" );
        equal( Math.slope([0,0], [0,10]), Infinity, "Infinite slope" );
        equal( Math.slope([0,0], [10,0]), 0, "Slope of 0" );
      });
    });

    //   module("Median");
    //
    //   test("Arrays", function() {
    //     expect(5);
    //     equal( Math.[0,0,0,0,5]).median(), 0, "Median of 0" );
    //     equal( Math.[0,0,1,2,5]).median(), 1, "Median of 5 numbers" );
    //     equal( Math.[0,0,1,2]).median(), 0.5, "(0 + 1)/2" );
    //     equal( Math.[0,0,1,2,3,4]).median(), 1.5, "(1 + 2)/2" );
    //
    //     var noMathmutate = [4,3,2,1];
    //     _.no_mutate).median();
    //     deepEqual(no_mutate, [4,3,2,1], "Original array not mutated" );
    //   });
    //
    //   module("Variance");
    //
    //   test("Arrays", function() {
    //     expect(1);
    //     equal( Math.[1,2,3]).variance(), 2/3, "Variance of [1,2,3]" );
    //   });
    //
    //   module("Standard Deviation");
    //
    //   test("Arrays", function() {
    //     expect(1);
    //     equal( Math.[1,2,3]).stdDeviation(), Math.sqrt(2/3), "Variance of [1,2,3]" );
    //   });
    //
    //   module("Z Score");
    //
    //   test("Arrays", function() {
    //     expect(1);
    //     deepEqual( Math.[1,2,3]).chain().zscore().map(function(d) { return d.toPrecision(4); }).value(), ["-1.225", "0.000", "1.225"], "Z Score of [1,2,3]" );
    //   });
    //
    //   test("Objects", function() {
    //     expect(1);
    //     deepEqual( Math.[{a: 1},{a: 2},{a: 3}]).chain().zscore('a').map(function(d) { return d.toPrecision(4); }).value(), ["-1.225", "0.000", "1.225"], "Z Score of [1,2,3]" );
    //   });
    //
    //   module("Transpose");
    //
    //   test("Arrays", function() {
    //     expect(1);
    //     deepEqual( Math.[[1,2,3],
    //                   [4,5,6],
    //                   [7,8,9]]).transpose(),
    //                  [[1,4,7],
    //                   [2,5,8],
    //                   [3,6,9]],
    //                  "Tranpose 3x3" );
    //   });
    //
    //   module("Power (Exponent)");
    //   test("Numbers", function() {
    //     expect(2);
    //     equal( Math.2).pow(5), 32, "2^5 = 32");
    //     equal( Math.0.5).pow(2), 0.25, "0.5^2 = 0.25");
    //   });
    //
    //   test("Arrays", function() {
    //     expect(1);
    //     deepEqual( Math.[2,3,4]).pow(2), [4,9,16], "[2,3,4] -> [4,9,16]");
    //   });
    //
    //   test("Moving Average", function() {
    //     expect(1);
    //     deepEqual(Math.[1,2,3,4,5,6,7,8,9,10]).movingAvg(3), [2,3,4,5,6,7,8,9]);
    //   });
    //
    //   test("Moving Average", function() {
    //     expect(2);
    //
    //     deepEqual(
    //       Math.[1,2,3,4,5,6,7,8,9,10]).movingAvg(4),
    //       [2.5,3.5,4.5,5.5,6.5,7.5,8.5]
    //     );
    //
    //     deepEqual(
    //       Math.[1,2,3,4,5,6,7,8,9,10]).movingAvg(3),
    //       [2,3,4,5,6,7,8,9]
    //     );
    //   });
    //
    </script>
</body>
</html>
