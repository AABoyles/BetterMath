<!DOCTYPE html>

<html>
<head>
  <title>bettermath.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="custom.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>bettermath.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <p><em><code>Math</code>, but Better.</em></p>
<p>BetterMath.js is a browser- and node- compatible javascript module for
a variety of useful numerical computations on arrays of numbers.</p>
<p>It’s designed to work seamlessly as a mixin with the standard <code>Math</code> object,
However, I know that messing with standard globals makes some people sick to
their stomachs, so it doesn’t do it automatically.</p>
<p>If you’re using it in the browser, you can access it from the <code>math</code> global.
(Note the lower-case ‘m’).</p>
<p>It you’re working in <a href="http://nodejs.com">node</a>, you can <code>require</code> it into
whatever you want.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-meta">
'use strict'</span>;

(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>If we’re in the browser, make sure you’ve included lodash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span>( <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-built_in">window</span>._ ) {
    <span class="hljs-keyword">var</span> _ = <span class="hljs-built_in">window</span>._
  }

  <span class="hljs-keyword">if</span>( <span class="hljs-keyword">typeof</span> _ === <span class="hljs-string">'undefined'</span> ) {
    <span class="hljs-keyword">if</span>( <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">require</span> !== <span class="hljs-string">'undefined'</span> ) {
      <span class="hljs-keyword">var</span> _ = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lodash'</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'BetterMath requires lodash'</span>);
    }
  }

  <span class="hljs-keyword">var</span> math = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <h2 id="unary-functions-for-a-single-number-">Unary Functions (for a single number)</h2>

            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <h3 id="square">square</h3>
<p>Multiplies a number by itself.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.square = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.pow(val, <span class="hljs-number">2</span>);
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <h3 id="cube">cube</h3>
<p>Multiplies a number by its square.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.cube = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.pow(val, <span class="hljs-number">3</span>);
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <h3 id="iseven">isEven</h3>
<p>Returns a boolean indicating whether a number n is even.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.isEven = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>) </span>{
    <span class="hljs-keyword">return</span> n % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <h3 id="isodd">isOdd</h3>
<p>Returns a boolean indicating whether a number n is odd.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.isOdd = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>) </span>{
    <span class="hljs-keyword">return</span> !math.isEven(n);
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <h3 id="isprime">isPrime</h3>
<p>Returns a boolean variable indicating whether a number n is prime.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.isPrime = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>) </span>{
    <span class="hljs-keyword">var</span> safeN = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-built_in">Math</span>.round(n));
    <span class="hljs-keyword">if</span> (!n) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (n!==<span class="hljs-number">2</span>) {
      <span class="hljs-keyword">var</span> goUntil = <span class="hljs-built_in">Math</span>.ceil(<span class="hljs-built_in">Math</span>.sqrt(safeN));
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">2</span>; i&lt;=goUntil; i++) {
        <span class="hljs-keyword">if</span> (safeN%i==<span class="hljs-number">0</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <h3 id="factors">factors</h3>
<p>Returns an array of the factors of a number, n</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.factors = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>) </span>{
    <span class="hljs-keyword">var</span> result = [];
    <span class="hljs-keyword">var</span> startN = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-built_in">Math</span>.round(n));
    <span class="hljs-keyword">var</span> finished = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">while</span>(!finished) {
      finished = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">2</span>; i&lt;=startN/<span class="hljs-number">2</span>; i++) {
        <span class="hljs-keyword">if</span> (n%i==<span class="hljs-number">0</span>) {
          n/=i;
          result.push(i);
          finished=<span class="hljs-literal">false</span>;
          <span class="hljs-keyword">break</span>;
        }
      }
    }
    <span class="hljs-keyword">if</span> (result.length===<span class="hljs-number">0</span>){
      result.push(startN);
    }
    <span class="hljs-keyword">return</span> result;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <h3 id="divisors">divisors</h3>
<p>Returns an array of the divisors of a number n</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.divisors = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n, opts</span>) </span>{
    <span class="hljs-keyword">var</span> safeN = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-built_in">Math</span>.round(n));
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Math</span>.abs(n)===safeN)
    opts = opts || {}
    <span class="hljs-keyword">var</span> result = [<span class="hljs-number">1</span>];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">2</span>; i&lt;=safeN/<span class="hljs-number">2</span>; i++){
      <span class="hljs-keyword">if</span> (safeN%i==<span class="hljs-number">0</span>){
        result.push(i)
      }
    }
    <span class="hljs-keyword">if</span> (!opts.proper){
      result.push(safeN);
    }
    <span class="hljs-keyword">return</span> result;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <h3 id="undirected-edges">undirected Edges</h3>
<p>Given an undirected graph of n nodes, what is the upper bound on the number
of distinct edges?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.undirectedEdges = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{
    <span class="hljs-keyword">return</span> n * (n<span class="hljs-number">-1</span>) / <span class="hljs-number">2</span>;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <h3 id="format">format</h3>
<p>Truncates a number n at the given precision</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.format = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n, precision</span>) </span>{
    <span class="hljs-keyword">return</span> (n.toFixed(precision))/<span class="hljs-number">1</span>;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <h2 id="binary-functions-for-two-numbers-">Binary functions (for two numbers)</h2>

            </div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <h3 id="samesign">sameSign</h3>
<p>Compares the signs of two values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.samesign = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">x, y</span>) </span>{
    <span class="hljs-keyword">return</span> (x &gt;= <span class="hljs-number">0</span>) !== (y &lt; <span class="hljs-number">0</span>);
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <h3 id="copysign">copySign</h3>
<p>Copies the sign of y onto x</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.copysign = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">x, y</span>) </span>{
    <span class="hljs-keyword">return</span> math.samesign(x, y) ? x : -x;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <h3 id="gcd">gcd</h3>
<p>Determines the greatest common divisor between two numbers, a and b.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.gcd = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">var</span> ref;
    <span class="hljs-keyword">while</span> (b) {
      ref = [b, a % b], a = ref[<span class="hljs-number">0</span>], b = ref[<span class="hljs-number">1</span>];
    }
    <span class="hljs-keyword">return</span> a;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <h3 id="lcm">lcm</h3>
<p>Determines the least common multiple of two numbers, a and b.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.lcm = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> a / math.gcd(a, b) * b;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <h2 id="trinary-functions-for-three-numbers-">Trinary functions (for three numbers)</h2>

            </div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <h3 id="between">between</h3>
<p>Returns a boolean indicating whether a number x is between two others
numbers, a and b.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.between = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x, a, b</span>) </span>{
      <span class="hljs-keyword">return</span> (a&lt;=x &amp;&amp; x&lt;=b) || (b&lt;=x &amp;&amp; x&lt;=a);
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <h2 id="array-of-numbers-functions">Array (of numbers) Functions</h2>
<p>Note that these will also generally work with arrays of objects, provided
you pass a ‘key’ argument indicating the key in the object which you wish
to operate on.</p>

            </div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <h3 id="sum">sum</h3>
<p>Computes the sum of an array of numbers (or an array of objects with a
given <code>key</code>).</p>
<p><code>math.sum([1,2,3]);</code> &rArr; 6</p>
<p><code>math.sum([{b: 4},{b: 5},{b: 6}], &#39;b&#39;)</code> &rArr; 15</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.sum = math.add = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj, key</span>) </span>{
    <span class="hljs-keyword">return</span> math.pluck(obj, key).reduce(<span class="hljs-function">(<span class="hljs-params">a, b</span>)=&gt;</span>{<span class="hljs-keyword">return</span> a + b}, <span class="hljs-number">0</span>);
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <h3 id="product">product</h3>
<p>Computes the product of an array of numbers (or an array of objects with a
a given <code>key</code>).</p>
<p><code>math.product([1,2,3])</code> &rArr; 6</p>
<p><code>math.product([{b: 4},{b: 5},{b: 6}], &#39;b&#39;)</code> &rArr; 120</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.product = math.multiply = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj, key</span>)</span>{
    <span class="hljs-keyword">return</span> math.pluck(obj, key).reduce(<span class="hljs-function">(<span class="hljs-params">a, b</span>)=&gt;</span>{<span class="hljs-keyword">return</span> a * b}, <span class="hljs-number">1</span>);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <h3 id="range">range</h3>
<p>Given a number, s, range returns an array of integers between 1 and s
(inclusive).</p>
<p>Given two numbers s and t, range returns an array of integers between t and
s (inclusive).</p>
<p>Given two numders s and t, along with an interval (as a third number) i,
range returns an array of integers between t and s such that the difference
between each element in the output array is exactly i.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.range = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">stop, start, step</span>) </span>{
    start = start || <span class="hljs-number">1</span>;
    step = step || <span class="hljs-number">1</span>;

    <span class="hljs-keyword">var</span> length = <span class="hljs-built_in">Math</span>.max(<span class="hljs-built_in">Math</span>.ceil((stop - start) / step), <span class="hljs-number">0</span>);
    <span class="hljs-keyword">var</span> range = <span class="hljs-built_in">Array</span>(length);

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> idx = <span class="hljs-number">0</span>; idx &lt; length; idx++, start += step) {
      range[idx] = start;
    }

    <span class="hljs-keyword">return</span> range;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <h3 id="factorial">factorial</h3>
<p>Given a number, computes the factorial.</p>
<p>Given an array of numbers, computes the factorial of each.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.factorial = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj, key</span>)</span>{
    <span class="hljs-keyword">if</span>(_.isNumber(obj)){
      <span class="hljs-keyword">if</span> (obj &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">Infinity</span>;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (obj === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> math.product(math.range(obj));
      }
    }
    <span class="hljs-keyword">var</span> arr = math.pluck(obj, key);
    <span class="hljs-keyword">return</span> arr.map(<span class="hljs-function">(<span class="hljs-params">i</span>)=&gt;</span>{<span class="hljs-keyword">return</span> math.product(math.range(i))});
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <h3 id="mean">mean</h3>
<p>Given an array of numbers, returns
the <a href="https://en.wikipedia.org/wiki/Arithmetic_mean">arithmetic mean</a>.</p>
<p><code>math.mean([1,2,3])</code> &rArr; 2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.mean = math.average = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj, key</span>)</span>{
    <span class="hljs-keyword">var</span> arr = math.pluck(obj, key);
    <span class="hljs-keyword">return</span> math.sum(arr) / arr.length;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <h3 id="median">median</h3>
<p>Given an array of numbers, returns
the <a href="https://en.wikipedia.org/wiki/Median">median</a>.</p>
<p><code>math.median([1,2,3,4])</code> &rArr; 2.5</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.median = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj, key</span>) </span>{
    <span class="hljs-keyword">var</span> arr = math.pluck(obj, key);
    <span class="hljs-keyword">var</span> middle = (arr.length + <span class="hljs-number">1</span>) /<span class="hljs-number">2</span>;
    <span class="hljs-keyword">var</span> sorted = math.sort(arr);
    <span class="hljs-keyword">return</span> (sorted.length % <span class="hljs-number">2</span>) ? sorted[middle - <span class="hljs-number">1</span>] : (sorted[middle - <span class="hljs-number">1.5</span>] + sorted[middle - <span class="hljs-number">0.5</span>]) / <span class="hljs-number">2</span>;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <h3 id="geometricmean">geometricMean</h3>
<p>Given an array of numbers, returns
the <a href="https://en.wikipedia.org/wiki/Geometric_mean">geomatric mean</a>.</p>
<p><code>math.geometricMean([3,9,27])</code> &rArr; 9</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.geometricMean = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj, key</span>)</span>{
    <span class="hljs-keyword">var</span> arr = math.pluck(obj, key);
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.pow(math.product(arr),<span class="hljs-number">1</span>/arr.length);
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <h3 id="pow">pow</h3>
<p>Given a number and an exponent, returns the number raised to the exponent.</p>
<p>Given an array of numbers, along
with an exponent, returns an array for which each entry is the
corresponding value of the original array raised to that exponent.</p>
<p><strong>WARNING! Overwrites Math.pow when mixed with Math</strong></p>
<p><code>math.pow(2,3)</code> &rArr; 8</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> origPow = <span class="hljs-built_in">Math</span>.pow; <span class="hljs-comment">//Just in case we want to extend Math</span>
  math.pow = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">x, n</span>) </span>{
    <span class="hljs-keyword">if</span>(_.isNumber(x)){
      <span class="hljs-keyword">return</span> origPow(x, n);
    }
    <span class="hljs-keyword">if</span>(_.isArray(x)){
      <span class="hljs-keyword">return</span> x.map(<span class="hljs-function">(<span class="hljs-params">i</span>)=&gt;</span>{<span class="hljs-keyword">return</span> math.pow(i, n)});
    }
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <h3 id="scale">scale</h3>
<p>Transforms an array to fit within the range [min, max], such that the
ratios between any two elements are maintained.</p>
<p><code>math.scale([0, 2, 5, 10])</code> &rArr; [0, 0.2, 0.5, 1]</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.scale = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arr, min, max</span>) </span>{
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> min == <span class="hljs-string">'undefined'</span>) min = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> max == <span class="hljs-string">'undefined'</span>) max = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">var</span> minArr = <span class="hljs-built_in">Math</span>.min(...arr);
    <span class="hljs-keyword">var</span> oldRange = <span class="hljs-built_in">Math</span>.max(...arr) - minArr;
    <span class="hljs-keyword">var</span> newRange = max - min;
    <span class="hljs-keyword">return</span> arr.map(<span class="hljs-function">(<span class="hljs-params">i</span>)=&gt;</span>{<span class="hljs-keyword">return</span> (i - minArr) / oldRange * newRange + min});
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <h3 id="slope">slope</h3>
<p>Computes the slope between two ordered pairs.</p>
<p><code>math.slope([0,0],[1,2])</code> &rArr; 2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.slope = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> (a[<span class="hljs-number">1</span>] - b[<span class="hljs-number">1</span>]) / (a[<span class="hljs-number">0</span>] - b[<span class="hljs-number">0</span>]);
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <h3 id="sort">Sort</h3>
<p>Sorts an array of numbers.</p>
<p><code>math.sort([3,1,2])</code> &rArr; [1,2,3]</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.sort = _.sortBy;</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <h3 id="variance">Variance</h3>
<p>Computes the variance of an array of numbers.</p>
<p><code>math.variance([1,2,3])</code> &rArr; 2/3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.variance = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arr</span>) </span>{
    <span class="hljs-keyword">var</span> mean = math.mean(arr);
    <span class="hljs-keyword">return</span> math.mean(arr.map(<span class="hljs-function">(<span class="hljs-params">x</span>)=&gt;</span>{<span class="hljs-keyword">return</span> math.pow(x-mean, <span class="hljs-number">2</span>)}));
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <h3 id="stddeviation">stdDeviation</h3>
<p>Computes the Standard Deviation of an array of numbers.</p>
<p><code>math.stdDeviation([1,2,3])</code> &rArr; 0.816496580927726</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.stdDeviation = math.sigma = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj, key</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.sqrt(math.variance(math.pluck(obj, key)));
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <h3 id="zscore">zscore</h3>
<p>Computes the standard Z-score, <em>assuming a normal distribution</em></p>
<p><code>math.zscore([1,2,3])</code> &rArr; [-1.224744871391589, 0, 1.224744871391589]</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.zscore = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj, key</span>) </span>{
    <span class="hljs-keyword">var</span> arr = math.pluck(obj, key),
        mean = math.mean(arr),
        sigma = math.stdDeviation(arr);
    <span class="hljs-keyword">return</span> arr.map(<span class="hljs-function">(<span class="hljs-params">d</span>)=&gt;</span>{<span class="hljs-keyword">return</span> (d-mean)/sigma});
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <h3 id="movingavg">movingAvg</h3>
<p>Computes a moving average of an array of numbers.</p>
<p><code>math.movingAvg([1,2,3,4,5], 3)</code> &rArr; [2,3,4]</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.movingAvg = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arr, size</span>) </span>{
    <span class="hljs-keyword">var</span> win, i, newarr = [];
    <span class="hljs-keyword">for</span>(i = size<span class="hljs-number">-1</span>; i &lt;= arr.length; i++) {
      win = arr.slice(i-size, i);
      <span class="hljs-keyword">if</span> (win.length === size) {
        newarr.push(math.mean(win));
      }
    }
    <span class="hljs-keyword">return</span> newarr;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <h2 id="matrix-operations">Matrix Operations</h2>
<p>For the purposes of BetterMath, a Matrix is simply an array containing m
arrays each of exactly length n. There are many other implementations of
Matrices and Matrix-like objects in Javascript.</p>

            </div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <h3 id="transpose">Transpose</h3>
<p>Computes a transpose of the given matrix.
<code>math.transpose(([1,2,3], [4,5,6], [7,8,9]])</code> &rArr; [[1,4,7], [2,5,8], [3,6,9]]</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.transpose = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arr</span>) </span>{
    <span class="hljs-keyword">var</span> trans = [];
    arr.forEach(<span class="hljs-function">(<span class="hljs-params">row, y</span>)=&gt;</span>{
      row.forEach(<span class="hljs-function">(<span class="hljs-params">col, x</span>)=&gt;</span>{
        <span class="hljs-keyword">if</span> (!trans[x]) trans[x] = [];
        trans[x][y] = col;
      });
    });
    <span class="hljs-keyword">return</span> trans;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <h2 id="helper-functions">Helper Functions</h2>

            </div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <h3 id="pluck">Pluck</h3>
<p>Returns an array of numbers.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  math.pluck = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj, key</span>)</span>{
    <span class="hljs-keyword">if</span> (_.isArray(obj) &amp;&amp; <span class="hljs-keyword">typeof</span> obj[<span class="hljs-number">0</span>] === <span class="hljs-string">'number'</span>) {
      <span class="hljs-keyword">var</span> arr = obj;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">var</span> key = key || <span class="hljs-string">'value'</span>;
      <span class="hljs-keyword">var</span> arr = _.map(obj, key);
    }
    <span class="hljs-keyword">return</span> arr;
  };

  <span class="hljs-keyword">if</span>( <span class="hljs-keyword">typeof</span> exports !== <span class="hljs-string">'undefined'</span> ) {
    <span class="hljs-keyword">if</span>( <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">module</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-built_in">module</span>.exports ) {
      exports = <span class="hljs-built_in">module</span>.exports = math
    }
    exports.math = math
  }
  <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">window</span>.math = math
  }

}).call(<span class="hljs-keyword">this</span>);</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
