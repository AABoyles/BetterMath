"use strict";(function(){var math={};math.isArray=function(obj){if(Array.isArray)return Array.isArray(obj);return variable.constructor===Array};math.isObject=function(obj){return obj===Object(obj)};math.pluck=function(obj,key){var arr=obj;if(math.isArray(obj)){if(math.isObject(obj[0])){var key=key||"value";var arr=obj.map(i=>i[key])}}return arr};math.isUndefined=function(obj,key){if(math.isArray(obj)){return math.pluck(obj,key).map(math.isUndefined)}return typeof obj==="undefined"};math.isNumber=function(obj,key){if(math.isArray(obj)){return math.pluck(obj,key).map(math.isNumber)}return typeof obj==="number"};math.isNaN=function(obj){if(math.isArray(obj)){return math.pluck(obj,key).map(math.isNaN)}return math.isNumber(obj)&&obj!==+obj};math.isInteger=function(obj,key){if(math.isArray(obj)){return math.pluck(obj,key).map(math.isInteger)}return Number.isInteger(obj)};math.isPositive=function(obj,key){if(math.isArray(obj)){return math.pluck(obj,key).map(math.isPositive)}return obj>0};math.isNegative=function(obj,key){if(math.isArray(obj)){return math.pluck(obj,key).map(math.isNegative)}return obj<0};math.isNonnegative=function(obj,key){if(math.isArray(obj)){return math.pluck(obj,key).map(math.isNonnegative)}return obj>=0};math.isNonpositive=function(obj,key){if(math.isArray(obj)){return math.pluck(obj,key).map(math.isNonpositive)}return obj<=0};math.isZero=function(obj,key){if(math.isArray(obj)){return math.pluck(obj,key).map(math.isZero)}return obj===0};math.isFinite=function(obj,key){if(math.isArray(obj)){return math.pluck(obj,key).map(math.isFinite)}return Number.isFinite(obj)};math.isInfinite=function(obj,key){if(math.isArray(obj)){return math.pluck(obj,key).map(math.isInfinite)}return!math.isFinite(obj)};math.isEven=function(obj,key){if(math.isArray(obj)){return math.pluck(obj,key).map(math.isEven)}return obj%2===0};math.isOdd=function(obj,key){if(math.isArray(obj)){return math.pluck(obj,key).map(math.isOdd)}return obj%2===1};math.isPrime=function(obj,key){if(math.isNumber(obj)){if(math.isArray(obj)){return math.pluck(obj,key).map(math.isPrime)}var safeN=Math.abs(Math.round(obj));if(!obj){return false}else if(obj!==2){var goUntil=Math.ceil(Math.sqrt(safeN));for(var i=2;i<=goUntil;i++){if(safeN%i===0){return false}}}return true}};math.isComposite=function(obj,key){if(math.isArray(obj)){return math.pluck(obj,key).map(math.isComposite)}return!math.isPrime(obj)};var origSign=Math.sign;math.sign=function(obj,key){if(math.isArray(obj)){return math.pluck(obj,key).map(math.sign)}return origSign(obj)};var origAbs=Math.abs;math.abs=function(obj,key){if(math.isNumber(obj)){return origAbs(obj)}if(math.isArray(obj)){return math.pluck(obj,key).map(math.abs)}};math.square=function(obj,key){return math.pow(math.pluck(obj,key),2)};math.cube=function(obj,key){return math.pow(math.pluck(obj,key),3)};var origPow=Math.pow;math.pow=function(obj,n){if(math.isArray(obj)){return obj.map(i=>math.pow(i,n))}return origPow(obj,n)};math.sqrt=function(obj,key){if(math.isArray(obj)){return math.pluck(obj,key).map(math.sqrt)}return Math.sqrt(obj)};math.cbrt=function(obj,key){if(math.isArray(obj)){return math.pluck(obj,key).map(math.cbrt)}return Math.cbrt(obj)};math.factorial=function(obj,key){if(math.isArray(obj)){return math.pluck(obj,key).map(math.factorial)}if(obj<0){return Infinity}else if(obj===0){return 1}else{return math.product(math.range(obj))}};math.scale=function(arr,min,max){if(math.isUndefined(min))min=0;if(math.isUndefined(max))max=1;var minArr=Math.min(...arr);var oldRange=Math.max(...arr)-minArr;var newRange=max-min;return arr.map(i=>(i-minArr)/oldRange*newRange+min)};math.sameSign=function(obj,b){if(math.isArray(obj)){return obj.map(i=>math.sameSign(i,b))}return obj>=0!==b<0};math.copySign=function(obj,b){if(math.isArray(obj)){return obj.map(i=>math.copysign(i,b))}return math.samesign(obj,b)?obj:-obj};math.undirectedEdges=function(obj,key){if(math.isArray(obj)){return math.pluck(obj,key).map(math.undirectedEdges)}return n*(n-1)/2};math.factors=function(obj){if(math.isArray(obj)){obj.map(math.factors)}var result=[],startN=Math.abs(Math.round(obj)),finished=false;while(!finished){finished=true;for(var i=2;i<=startN/2;i++){if(obj%i===0){obj/=i;result.push(i);finished=false;break}}}if(result.length===0){result.push(startN)}return result};math.divisors=function(obj){if(math.isArray(obj)){return obj.map(math.divisors)}var safeN=Math.abs(Math.round(obj));var result=[1];for(var i=2;i<=safeN/2;i++){if(safeN%i===0){result.push(i)}}return result};math.between=function(obj,a,b){if(math.isArray(obj)){return obj.map(i=>math.between(i))}return a<=obj&&obj<=b||b<=obj&&obj<=a};math.format=function(obj,precision){if(math.isArray(obj)){return obj.map(i=>math.format(i,precision))}return obj.toFixed(precision)/1};math.sort=function(obj,descending){if(descending){return obj.sort((a,b)=>b-a)}else{return obj.sort((a,b)=>a-b)}};math.movingAvg=function(arr,size){var win,i,newarr=[];for(i=size-1;i<=arr.length;i++){win=arr.slice(i-size,i);if(win.length===size){newarr.push(math.mean(win))}}return newarr};math.sum=math.add=function(obj,key){return math.pluck(obj,key).reduce((a,b)=>a+b,0)};math.product=math.multiply=function(obj,key){return math.pluck(obj,key).reduce((a,b)=>a*b,1)};math.mean=math.average=function(obj,key){var arr=math.pluck(obj,key);return math.sum(arr)/arr.length};math.median=function(obj,key){var arr=math.pluck(obj,key);var middle=(arr.length+1)/2;var sorted=math.sort(arr.slice());return sorted.length%2?sorted[middle-1]:(sorted[middle-1.5]+sorted[middle-.5])/2};math.mode=math.modes=function(obj,key){var arr=math.pluck(obj,key);if(!arr.length)return[];var modeMap={},maxCount=0,modes=[];arr.forEach(val=>{if(!modeMap[val]){modeMap[val]=1}else{modeMap[val]++}if(modeMap[val]>maxCount){modes=[val];maxCount=modeMap[val]}else if(modeMap[val]===maxCount){modes.push(val)}});return modes};math.geometricMean=function(obj,key){var arr=math.pluck(obj,key);return Math.pow(math.product(arr),1/arr.length)};math.variance=function(arr){var mean=math.mean(arr);return math.mean(arr.map(x=>math.pow(x-mean,2)))};math.stdDeviation=math.sigma=function(obj,key){return Math.sqrt(math.variance(math.pluck(obj,key)))};math.meanAbsoluteDeviation=function(obj,key){var arr=math.pluck(obj,key),mean=math.mean(arr);return math.mean(arr.map(n=>Math.abs(n-mean)))};math.zscore=function(obj,key){var arr=math.pluck(obj,key),mean=math.mean(arr),sigma=math.stdDeviation(arr);return arr.map(d=>(d-mean)/sigma)};math.gcd=function(a,b){var ref;while(b){ref=[b,a%b],a=ref[0],b=ref[1]}return a};math.lcm=function(a,b){return a/math.gcd(a,b)*b};math.range=function(stop,start,step){start=start||1;step=step||1;var length=Math.max(Math.ceil((stop-start)/step),0);var range=Array(length);for(var idx=0;idx<length;idx++,start+=step){range[idx]=start}return range};math.slope=function(a,b){return(a[1]-b[1])/(a[0]-b[0])};math.transpose=function(arr){var trans=[];arr.forEach((row,y)=>{row.forEach((col,x)=>{if(!trans[x])trans[x]=[];trans[x][y]=col})});return trans};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=math}exports.math=math}else{window.math=math}}).call(this);
